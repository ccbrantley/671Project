USE 671PROJECT;

CREATE TABLE ADMIN (
user_id INT AUTO_INCREMENT NOT NULL,
username CHARACTER VARYING (256) UNIQUE NOT NULL,
password CHARACTER VARYING (256) UNIQUE NOT NULL,
PRIMARY KEY (user_id)
);

CREATE TABLE CUSTOMER (
user_id INT AUTO_INCREMENT NOT NULL,
username CHARACTER VARYING (256) UNIQUE NOT NULL,
password CHARACTER VARYING (256) UNIQUE NOT NULL,
f_name CHARACTER VARYING (64),
l_name CHARACTER VARYING (64),
street CHARACTER VARYING (64),
city CHARACTER VARYING (64),
zip CHARACTER VARYING (64),
state CHARACTER VARYING (64),
country CHARACTER VARYING (64),
credit_card CHARACTER VARYING (64),
PRIMARY KEY (user_id)
);

CREATE TABLE STORAGE (
	storage_id CHARACTER VARYING (64),
	size INT,
	qty INT,
	price DECIMAL (7, 2),
	type ENUM ('hdd', 'ssd'),
	PRIMARY KEY (storage_id)
);

CREATE TABLE O_SYSTEM (
	name CHARACTER VARYING (64),
	price DECIMAL (7, 2),
	PRIMARY KEY (name)
);

CREATE TABLE MEMORY (
	memory_id CHARACTER VARYING (64),
	size INT,
	qty INT,
	price DECIMAL (7, 2),
	PRIMARY KEY (memory_id)
);

CREATE TABLE PROCESSOR (
	processor_id CHARACTER VARYING (64),
	name CHARACTER VARYING (64),
	qty INT,
	price DECIMAL (7, 2),
	PRIMARY KEY (processor_id)
);

CREATE TABLE PROCESSOR_STORAGE (
	processor_id CHARACTER VARYING (64),
	storage_id CHARACTER VARYING (64),
	FOREIGN KEY (processor_id) REFERENCES PROCESSOR (processor_id),
	FOREIGN KEY (storage_id) REFERENCES STORAGE (storage_id)
);

CREATE TABLE PROCESSOR_O_SYSTEM (
	processor_id CHARACTER VARYING (64),
	os_name CHARACTER VARYING (64),
	FOREIGN KEY (processor_id) REFERENCES PROCESSOR (processor_id),
	FOREIGN KEY (os_name) REFERENCES O_SYSTEM (name)
);

CREATE TABLE PROCESSOR_MEMORY (
	processor_id CHARACTER VARYING (64),
	memory_id CHARACTER VARYING (64),
	FOREIGN KEY (processor_id) REFERENCES PROCESSOR (processor_id),
	FOREIGN KEY (memory_id) REFERENCES MEMORY (memory_id)
);

CREATE TABLE BASE_SYSTEM (
	base_id CHARACTER VARYING (64),
	processor_id CHARACTER VARYING (64),
	memory_id CHARACTER VARYING (64),
	storage_id CHARACTER VARYING (64),
	os_name CHARACTER VARYING (64),
	weight DECIMAL(8, 2),
	size CHARACTER VARYING (32),
	price DECIMAL (7, 2),
	type ENUM ('laptop', 'tablet', 'hybrid'),
	PRIMARY KEY (base_id),
	FOREIGN KEY (processor_id) REFERENCES PROCESSOR (processor_id),
	FOREIGN KEY (memory_id) REFERENCES MEMORY (memory_id),
	FOREIGN KEY (storage_id) REFERENCES STORAGE (storage_id),
	FOREIGN KEY (os_name) REFERENCES O_SYSTEM (name)
);

CREATE TABLE WISHLIST (
	user_id INT,
	base_id CHARACTER VARYING (64),
	memory_id CHARACTER VARYING (64),
	storage_id CHARACTER VARYING (64),
	os_name CHARACTER VARYING (64),
	FOREIGN KEY (user_id) REFERENCES CUSTOMER (user_id),
	FOREIGN KEY (base_id) REFERENCES BASE_SYSTEM (base_id),
	FOREIGN KEY (memory_id) REFERENCES MEMORY (memory_id),
	FOREIGN KEY (storage_id) REFERENCES STORAGE (storage_id),
	FOREIGN KEY (os_name) REFERENCES O_SYSTEM (name)
);

CREATE TABLE PURCHASE (
	purchase_id INT AUTO_INCREMENT NOT NULL,
	user_id INT,
	base_id CHARACTER VARYING (64),
	memory_id CHARACTER VARYING (64),
	storage_id CHARACTER VARYING (64),
	os_name CHARACTER VARYING (64),
	price DECIMAL (7, 2),
	status ENUM ('processed', 'unprocessed'),
	date DATE,
	PRIMARY KEY (purchase_id),
	FOREIGN KEY (user_id) REFERENCES CUSTOMER (user_id),
	FOREIGN KEY (base_id) REFERENCES BASE_SYSTEM (base_id),
	FOREIGN KEY (memory_id) REFERENCES MEMORY (memory_id),
	FOREIGN KEY (storage_id) REFERENCES STORAGE (storage_id),
	FOREIGN KEY (os_name) REFERENCES O_SYSTEM (name)
);











